// Project-local debug tasks
//
// For more documentation on how to configure debug tasks,
// see: https://zed.dev/docs/debugger
[
    {
        "label": "Debug vLLM AcceptLengths",
        "adapter": "Debugpy",
        "request": "launch",
        "program": "vllm.entrypoints.cli.main",
        "args": [
            "serve",
            "${TARGET_MODEL}",
            "--tensor-parallel-size",
            "4",
            "--gpu-memory-utilization",
            "0.95",
            "--served-model-name",
            "${MODEL_NAME}",
            "--max-model-len",
            "32K",
            "--compilation-config",
            "3",
            "--port",
            "${PORT}",
            "--speculative-config",
            "{\"model\": \"${DRAFT_MODEL}\", \"num_speculative_tokens\": 6}"
        ],
        "env": {
            "MODEL_NAME": "magistral-small-2506",
            "TARGET_MODEL": "mistralai/Magistral-Small-2506",
            "DRAFT_MODEL": "/mlf7-shared/shanes/checkpoints/magistral-medium/0603/drafters/magpie+dolly_cpt2k_base",
            "PORT": "9092"
        }
    }
]
